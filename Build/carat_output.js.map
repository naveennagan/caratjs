{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./vdom.js","webpack:///./render.js","webpack:///./watcher.js","webpack:///./carat.js","webpack:///./index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","vdomTypes","vdom_0","this","isTypeValid","type","indexOf","vdom","init","content","children","parent","props","getHash","hashKey","keys","map","getChildren","render","mount","velem","document","createElement","appendChild","createTextNode","child","render_0","events","watcher_0","component","cb","eventName","addEventListener","e","console","log","parser","DOMParser","caratRegexExpression","Carat","view","fields","getVDom","interpolatedTemplate","interpolate","htmlDoc","parseFromString","body","childNodes","createVdomFromDOM","htmlDOM","dom","htmlDOMchildNodes","length","childNode","push","htmlAttrs","attributes","nodeValue","evaluateExpression","expression","fieldString","fieldKey","functionalExpression","replace","resultFunction","Function","slice","mountelement","renderedComponent","mountElement","innerHtml","carat","window"],"mappings":"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","file":"carat_output.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","var vdomTypes = [\"NONE\", \"DIV\"];\n\nfunction vdom() {\n  this.isTypeValid = function (type) {\n    return vdomTypes.indexOf(type) != -1 ? type : \"NONE\"\n  },\n    this.vdom = {\n      init: (type, content, children, parent, props) => {\n        this.vdom.type = this.isTypeValid(type);\n        this.vdom.content = content || \"\";\n        this.vdom.children = children || [];\n        this.vdom.parent = parent || {};\n        this.vdom.props = props || {};\n      },\n      getHash: () => {\n        let keys = Object.keys(this.vdom.props);\n        var hashKey = \"CARAT\";\n        var hashContent = keys.map((key) => {\n          hashKey += this.vdom.props[key];\n        });\n        return hashKey;\n      },\n      getChildren: () => {\n        return this.vdom.children;\n      },\n      type: \"NONE\",\n      children: [],\n      content: \"\",\n      parent: {},\n      props: {}\n    };\n  return this.vdom;\n}\n\nexport default vdom;","var render = function (vdom, mount) {\n  if (vdom.type === \"DIV\") {\n    //create element with\n    var velem = document.createElement(\"div\");\n    //if div has content create text node and append it to div\n    vdom.content ? velem.appendChild(document.createTextNode(vdom.content)) : \"\";\n    //if it has children recursively call them with updated mount point i.e. velem\n    vdom.children.map((child) => {\n      render(child, velem)\n    });\n    mount && mount != null && mount.appendChild ? mount.appendChild(velem) : \"\";\n    return mount;\n  }\n  else {\n    return mount;\n  }\n}\n\nexport default render;","import vdom from './vdom';\nimport render from './render';\nvar events = ['click'];\nvar watcher = (component, mount, cb) => {\n  events.map((eventName) => {\n    mount.addEventListener(eventName, (e) => {\n      console.log(\"  Re Render the component !  \");\n      cb(component, mount);\n    });\n  });\n}\nexport default watcher;\n","import vdom from './vdom';\nimport render from './render';\nimport watcher from './watcher';\nvar parser = new DOMParser();\nvar caratRegexExpression = /\\{([0-9A-Za-z ]+)\\}/g;\nvar Carat = function (view, fields) {\n  //check for look part make it cumpulsory\n  // check for fields part\n  if (!view) {\n    throw \"View part of the component is not defined ! \";\n  }\n  this.view = view;\n  this.fields = fields;\n\n  this.getVDom = () => {\n    //parse view part and create vdom objects\n    //step 1 --- interpolate view part with properties\n    var interpolatedTemplate = this.interpolate(this.view, this.fields);\n\n    console.log(\"Interpolated Template \", interpolatedTemplate);\n    //step 2 --- created html doc    \n    var htmlBody = parser.parseFromString(interpolatedTemplate, \"text/html\");\n\n    var htmlDoc = htmlBody.body.childNodes[0];\n\n    console.log(\"HTML Parsed \", htmlDoc);\n\n    //step 3 --- create vdom\n    var vdom = this.createVdomFromDOM(htmlDoc, {});\n\n    return vdom;\n\n  },\n    this.createVdomFromDOM = (htmlDOM, parent) => {\n      if (!htmlDOM) {\n        return {};\n      }\n      var dom = new vdom();\n      var children = [];\n      var htmlDOMchildNodes = htmlDOM.childNodes;\n      console.log(\"Child nodes \", htmlDOMchildNodes);\n      for (var i = 0; i < htmlDOMchildNodes.length; i++) {\n        var childNode = this.createVdomFromDOM(htmlDOMchildNodes[i], dom);\n        children.push(childNode);\n      }\n      var htmlAttrs = htmlDOM.attributes;\n      dom.init(\"DIV\", htmlDOM.nodeValue, children, parent, htmlAttrs);\n      return dom;\n    },\n    this.evaluateExpression = (expression, fields) => {\n      var fieldKeys = Object.keys(fields);\n      var fieldString = \"\";\n      fieldKeys.map((fieldKey) => {\n        typeof fields[fieldKey] != 'string' ? fieldString += `var ${fieldKey}=${fields[fieldKey]};` :\n          fieldString += `var ${fieldKey}='${fields[fieldKey]}';`;\n      });\n\n      console.log(\"Field String \", fieldString);\n      console.log(\"Expression\", expression);\n      //declare all variables from fields and append it to expression;\n      var functionalExpression = 'var value=\"\";'\n        + fieldString + 'value='\n        + expression\n        + '; return value;';\n      functionalExpression = functionalExpression.replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, \"\");\n      console.log(\"Functional Expression \", functionalExpression);\n      var resultFunction = Function(functionalExpression);\n      console.log(\" Real function \", resultFunction);\n      return resultFunction();\n    },\n    this.interpolate = (view, fields) => {\n      return view.replace(caratRegexExpression,\n        (m) => {\n          var expression = m.slice(1, -1);\n          var value = this.evaluateExpression(expression, fields);\n          return \"'\" + value + \"'\";\n        });\n      // while (view.match(caratRegexExpression)) {\n      //   view.replace(caratRegexExpression,\n      //     (m) => {\n      //       var expression = m.slice(1, -1);\n      //       var value = this.evaluateExpression(expression, fields);\n      //       return value;\n      //     });\n      // }\n    }\n}\n\nCarat.mount = (component, mountelement) => {\n  //render component and mount it to dom.\n  var vdom = component.getVDom();\n  console.log(\"Created VDOM \", vdom);\n  var renderedComponent = render(vdom, mountElement);\n  console.log(\"Rendered Component is \", renderedComponent);\n  mountelement.innerHtml = renderedComponent;\n  //add event listeners\n  watcher(component, mountElement, Carat.mount);\n\n  return renderedComponent;\n};\n\nexport default Carat;","import Carat from './carat.js';\nconsole.log(\"Imported Carat from \", Carat);\nwindow.Carat = Carat;"],"sourceRoot":""}